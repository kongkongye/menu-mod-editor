window.Menu=function(){var d,e,f,g,h,a=/^\s+$/,b="nerd",c=function(){b="nerd"===b?"laic":"nerd",Xonomy.setMode(b)};return c(),d=function(a){return $("<div></div>").append($(a.documentElement)).html()},e=function(a){var d,b="",c=/(>)(<)(\/*)/g;return a=a.replace(c,"$1\r\n$2$3"),d=0,jQuery.each(a.split("\r\n"),function(a,c){var f,g,e=0;for(c.match(/.+<\/\w[^>]*>$/)?e=0:c.match(/^<\/\w/)?0!=d&&(d-=1):e=c.match(/^<\w[^>]*[^\/]>.*$/)?1:0,f="",g=0;d>g;g++)f+="  ";b+=f+c+"\r\n",d+=e}),b},f=function(b,c){var d,e,g;for(d=0;d<c.childNodes.length;d++)if(e=c.childNodes[d],3!==e.nodeType)1!==e.nodeType||f(b,e);else{if(a.test(e.nodeValue)){c.removeChild(e),d--;continue}"line"===e.parentNode.nodeName&&(g=b.createElement("text"),g.appendChild(b.createTextNode(e.nodeValue)),c.replaceChild(g,e))}},g=function(a){var b;if(1===a.nodeType)for("menu"===a.nodeName&&a.setAttribute("xmlns","http://xsd.kongkongye.com/MenuMod-1.0.0.xsd"),a.removeAttribute("xml:space"),b=0;b<a.childNodes.length;b++)g(a.childNodes[b]);else if(9===a.nodeType)for(b=0;b<a.childNodes.length;b++)g(a.childNodes[b])},$("#import").click(function(){var a,b;try{a=$("#in").val(),b=$.parseXML(a),Menu.importFix(b,b),Xonomy.render(b,$("#container")[0],docSpec)}catch(c){console.log(c),alert(use(10))}}),$("#export").click(function(){var a=Xonomy.harvest(),b=$.parseXML(a);Menu.exportFix(b),$("#out").text(Menu.formatXml(Menu.convertXmlDocumentToString(b))),$("#select").attr("disabled",!1)}),$("#select").click(function(){$("#out").select()}),$("#toggle").click(function(){Menu.toggleMode()}),$(function(){$("#in").val("<menu title=''></menu>"),$("#import").click()}),h=docSpec.onchange,docSpec.onchange=function(){h(),$("#select").attr("disabled",!0)},{convertXmlDocumentToString:d,formatXml:e,importFix:f,exportFix:g,toggleMode:c}}();